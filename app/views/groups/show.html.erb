<%= render partial: 'group', locals: {group: @group, show_people: true} %>

<% if @group.email.present? %>
  <div class="card mt-4">
    <div class="card-header">
      <h5>Add Members to Google Group via CSV</h5>
    </div>
    <div class="card-body">
      <p>Upload a CSV file containing email addresses to add to the <strong><%= @group.email %></strong> Google Group.</p>
      <p class="text-muted">The CSV should have an "Email address" column. Other columns will be ignored.</p>

      <%= form_with url: import_csv_group_path(@group), method: :post, multipart: true do |form| %>
        <div class="mb-3">
          <%= form.label :csv_file, "CSV File", class: 'form-label' %>
          <%= form.file_field :csv_file, accept: '.csv', class: 'form-control', required: true %>
        </div>

        <div class="mb-3">
          <%= form.submit "Import Now", class: 'btn btn-success' %>
          <%= form.submit "Import as Background Job", name: 'background', class: 'btn btn-primary ms-2' %>
        </div>
        <p class="text-muted small">
          <strong>Import Now:</strong> Processes immediately and shows results on screen.<br>
          <strong>Background Job:</strong> Queues for later processing. Check logs for results.
        </p>
      <% end %>
    </div>
  </div>
<% end %>

<div class="mt-3">
  <%= link_to "Edit this group", edit_group_path(@group), class: 'btn btn-primary' %>
  <%= link_to "Back to groups", groups_path, class: 'btn btn-secondary' %>
  <%= button_to "Destroy this group", @group, method: :delete, class: 'btn btn-danger d-inline-block', data: {turbo_confirm: 'Are you sure?'} %>
</div>
