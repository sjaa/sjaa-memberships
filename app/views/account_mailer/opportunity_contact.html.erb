<h1>SJAA Volunteer Opportunity Interest</h1>
<p>A member has expressed interest in the following volunteer opportunity:</p>

<div style="background-color: #f8f9fa; padding: 16px; margin: 20px 0; border-left: 4px solid #007bff;">
  <h2 style="margin-top: 0;"><%= @opportunity.title %></h2>
  <% if @opportunity.description.present? %>
    <%= simple_format(@opportunity.description) %>
  <% end %>
</div>

<h3>Message from <%= @requester_name %>:</h3>

<div style="border-left: 4px solid #0066cc; padding-left: 16px; margin: 20px 0; color: #333;">
  <%= simple_format(@message) %>
</div>

<% if @requester&.is_a?(Person) %>
<h3>Contact Information:</h3>
<ul>
  <li><strong>Name:</strong> <%= @requester.first_name %> <%= @requester.last_name %></li>
  <li><strong>Email:</strong> <%= @requester.email %></li>
</ul>

<% if @requester.people_skills.where('skill_level > 0').any? %>
<h3>Volunteer's Skills:</h3>
<ul>
  <% @requester.people_skills.includes(:skill).where('skill_level > 0').order('skills.name').each do |ps| %>
    <li>
      <strong><%= ps.skill.name %>:</strong> <%= ps.skill_level_name %>
      <%
        # Check if this skill is required for the opportunity
        required_skill = @opportunity.opportunity_skills.find_by(skill_id: ps.skill_id)
        if required_skill
          if ps.skill_level_before_type_cast >= required_skill.skill_level_before_type_cast
      %>
        <span style="color: #28a745;">✓ Meets requirement</span>
      <%
          else
      %>
        <span style="color: #ffc107;">⚠ Below requirement (<%= required_skill.skill_level_name %> needed)</span>
      <%
          end
        end
      %>
    </li>
  <% end %>
</ul>
<% end %>
<% end %>

<p>
You can reply directly to this email to respond to the volunteer.
</p>

<p>
Thank you for supporting SJAA volunteer opportunities!
</p>

<p>
Clear skies,<br/>
SJAA Leadership
</p>
